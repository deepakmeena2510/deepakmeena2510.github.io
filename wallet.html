<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Wallet</title>
<link rel="stylesheet" href="css/style.css">
</head>
<body>

<h2>Wallet</h2>
<p>Balance: ‚Çπ <span id="bal">0</span></p>

<div id="list"></div>

<h3>Withdraw</h3>
<input id="amount" placeholder="Enter Amount ‚Çπ">
<input id="upi" placeholder="Enter UPI ID">

<select id="method">
  <option value="">Select Method</option>
  <option>UPI</option>
  <option>Paytm</option>
  <option>PhonePe</option>
  <option>Google Pay</option>
</select>

<button onclick="withdraw()">Withdraw</button>

<p id="status"></p>

<script>
let bal = Number(localStorage.getItem("balance"));
let used = JSON.parse(localStorage.getItem("used")||"[]");
document.getElementById("bal").innerText = bal;

let amounts=[10,30,50,100,200,500];
let list=document.getElementById("list");

function render(){
  list.innerHTML="";
  amounts.forEach(a=>{
    if(a<=100 && used.includes(a)) return;
    let b=document.createElement("button");
    b.innerText="‚Çπ"+a;
    b.onclick=()=>document.getElementById("amount").value=a;
    list.appendChild(b);
  });
}
render();

function withdraw(){
  let amt=Number(amount.value);
  let upiId=upi.value;
  let m=method.value;

  if(!amt||!upiId||!m){
    status.innerText="‚ùå Details missing";
    return;
  }
  if(!upiId.includes("@")){
    status.innerText="‚ùå Invalid UPI";
    return;
  }
  if(bal<amt){
    status.innerText="‚ùå Balance low";
    return;
  }

  status.innerText="‚è≥ Processing...";
  setTimeout(()=>{
    status.innerText="üîî Pending";
  },1000);

  setTimeout(()=>{
    bal-=amt;
    localStorage.setItem("balance",bal);
    balSpan=bal;
    document.getElementById("bal").innerText=bal;

    if(amt<=100 && !used.includes(amt)){
      used.push(amt);
      localStorage.setItem("used",JSON.stringify(used));
    }

    status.innerText="‚úÖ Success";
    render();
  },3000);
}
</script>

</body>
</html>
