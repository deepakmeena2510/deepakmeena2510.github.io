<!DOCTYPE html>
<html>
<head>
<title>Wallet</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
body{margin:0;font-family:sans-serif;background:#f4f6f8}
.header{background:#16a085;color:#fff;padding:18px;text-align:center;font-size:20px}
.box{background:#fff;margin:15px;padding:16px;border-radius:14px;box-shadow:0 5px 12px rgba(0,0,0,.1)}
.row{display:flex;justify-content:space-between;align-items:center;margin-bottom:12px}
.btn{padding:8px 16px;border:none;border-radius:20px;background:#2ecc71;color:#fff}
.btn:active{transform:scale(.95)}
.popup,.loader{position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,.6);display:none;align-items:center;justify-content:center}
.card{background:#fff;padding:20px;border-radius:14px;width:85%}
input{width:100%;padding:10px;margin-top:8px;border-radius:8px;border:1px solid #ccc}
.center{text-align:center}
.spinner{width:40px;height:40px;border:4px solid #ddd;border-top:4px solid #16a085;border-radius:50%;animation:spin 1s linear infinite;margin:auto}
@keyframes spin{100%{transform:rotate(360deg)}}
</style>
</head>

<body>

<div class="header">ðŸ’¼ Wallet</div>

<div class="box">
  <b>Available Balance:</b> â‚¹ <span id="bal">0</span>
</div>

<div class="box" id="list"></div>

<!-- UPI POPUP -->
<div class="popup" id="popup">
  <div class="card">
    <h3>UPI Details</h3>
    <input id="name" placeholder="Your Name">
    <input id="upi" placeholder="UPI ID">
    <br><br>
    <button class="btn" onclick="submitUPI()">Submit</button>
  </div>
</div>

<!-- PROCESSING -->
<div class="loader" id="loader">
  <div class="card center">
    <div class="spinner"></div>
    <p id="status">Processing...</p>
  </div>
</div>

<script>
let balance = parseInt(localStorage.getItem("balance")) || 100;
document.getElementById("bal").innerText = balance;

let withdrawAmt = 0;
let history = JSON.parse(localStorage.getItem("history") || "[]");

let amounts = [10,30,50,100,200,500];
let list = document.getElementById("list");

amounts.forEach(a=>{
  let r = document.createElement("div");
  r.className="row";
  r.innerHTML = `<div>Withdraw â‚¹${a}</div><button class="btn">Apply</button>`;
  r.querySelector("button").onclick=()=>{
    if(balance<a){alert("Balance à¤•à¤® à¤¹à¥ˆ");return;}
    withdrawAmt=a;
    document.getElementById("popup").style.display="flex";
  };
  list.appendChild(r);
});

function submitUPI(){
  let n=document.getElementById("name").value;
  let u=document.getElementById("upi").value;
  if(!n||!u){alert("Details à¤­à¤°à¥‡à¤‚");return;}

  document.getElementById("popup").style.display="none";
  document.getElementById("loader").style.display="flex";
  document.getElementById("status").innerText="Processing...";

  setTimeout(()=>{
    document.getElementById("status").innerText="Pending...";
    history.push({
      amt:withdrawAmt,
      status:"Pending",
      date:new Date().toLocaleString()
    });
    balance-=withdrawAmt;
    localStorage.setItem("balance",balance);
    localStorage.setItem("history",JSON.stringify(history));
    document.getElementById("bal").innerText=balance;

    setTimeout(()=>{
      history[history.length-1].status="Success";
      localStorage.setItem("history",JSON.stringify(history));
      document.getElementById("loader").style.display="none";
      alert("Withdraw Success!");
    },3000);

  },2000);
}
</script>

</body>
</html>
