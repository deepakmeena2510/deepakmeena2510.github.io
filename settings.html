<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Settings</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>

<body>

<h2>⚙ Settings</h2>

<p><b>User Email:</b> <span id="email"></span></p>

<input id="name" placeholder="Enter your name">
<br><br>

<button onclick="saveName()">Save Name</button>
<br><br>

<button onclick="logout()">Logout</button>
<br><br>

<button onclick="back()">⬅ Back</button>

<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-auth-compat.js"></script>

<script>
firebase.initializeApp({
  apiKey: "PASTE_KEY",
  authDomain: "PASTE_DOMAIN",
  projectId: "PASTE_PROJECT_ID",
  appId: "PASTE_APP_ID"
});

firebase.auth().onAuthStateChanged(user=>{
  if(!user) location.href="index.html";
  document.getElementById("email").innerText = user.email;
});

document.getElementById("name").value =
  localStorage.getItem("username") || "";

function saveName(){
  localStorage.setItem("username",
    document.getElementById("name").value);
  alert("Name Saved");
}

function logout(){
  firebase.auth().signOut()
  .then(()=>location.href="index.html");
}

function back(){
  history.back();
}
</script>

</body>
</html>
